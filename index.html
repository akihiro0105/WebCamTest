<!DOCTYPE html>
<html lang="ja">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>WEBカメラの映像を表示</title>
  </head>
  <body>
    <div>
      <video id="video" width="100%" height="100%"></video>
      <select id="selectBox" onchange="onchange_selectbox()">
      </select>
    </div>
    <script>
      const selectbox=document.getElementById("selectBox");
      const video = document.getElementById('video');

      navigator.mediaDevices.enumerateDevices().then((devices) => {
        devices.filter((device) => device.kind === 'videoinput').forEach((device) => {
          selectbox.options.add(new Option(device.label,device.deviceId));
        });
        onchange_selectbox();
      }).catch((e) => console.error(e));

      function onchange_selectbox(){
        navigator.mediaDevices
        .getUserMedia({
          video: {deviceId:selectbox.options[selectbox.selectedIndex].value},
          audio: false,
        })
        .then((stream) => {
          video.srcObject = stream;
          video.play();
        })
        .catch((e) => {
          console.log(e);
        });
      }
    </script>
  </body>
</html>